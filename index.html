<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>YogaSix West New York — Schedule</title>
  <meta name="theme-color" content="#22c7c7"/>
  <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@700;900&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --ink:#0b1b1b; --muted:#5a6673;
      --brand:#22c7c7; --accent:#8a7cf6;
      --card:#fff; --ring:#e7eefc;
      --shadow:0 10px 26px rgba(16,24,40,.12);
      --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{margin:0}
    body{
      color:var(--ink);
      font-family:"Montserrat",system-ui,Arial,sans-serif;
      background:
        radial-gradient(1000px 600px at 15% -10%, #e9fbfa, transparent 60%),
        radial-gradient(1100px 700px at 90% 0%, #efe7ff, transparent 60%),
        linear-gradient(180deg,#ffffff,#f7fbfc 50%,#fff);
      overflow-x:hidden; min-height:100svh;
    }

    /* floating lotus icons */
    .lotus{position:fixed;width:110px;height:110px;fill:var(--accent);opacity:.12;z-index:-1;animation:float 22s linear infinite}
    .lotus:nth-child(2){left:8%;top:25%;animation-duration:28s}
    .lotus:nth-child(3){right:12%;top:45%;animation-duration:25s}
    .lotus:nth-child(4){left:28%;bottom:18%;animation-duration:23s}
    @keyframes float{from{transform:translateY(100vh) rotate(0)} to{transform:translateY(-120vh) rotate(360deg)}}

    .wrap{max-width:900px;margin:0 auto;padding:24px 16px 80px}

    header{text-align:center;padding:26px 0 8px}
    .logo{
      font-family:"League Spartan",sans-serif;
      font-weight:900; letter-spacing:.4px;
      font-size: clamp(36px, 6vw, 52px);
      line-height:1.05;
      background:linear-gradient(90deg,var(--brand),var(--accent));
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    }
    nav{display:flex;gap:22px;justify-content:center;padding:10px 0 4px}
    nav a{color:var(--ink);text-decoration:none;font-weight:600;position:relative}
    nav a::after{content:"";position:absolute;left:0;bottom:-4px;width:100%;height:2px;background:var(--brand);transform:scaleX(0);transition:.25s}
    nav a:hover::after{transform:scaleX(1)}

    .card{background:var(--card);border:1px solid #fff;border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;margin-top:18px}
    .card h2{margin:0;padding:14px 18px;font-family:"League Spartan";background:linear-gradient(90deg,#fff,#f6f9ff)}
    .body{padding:16px}

    /* daily list */
    .list{display:flex;flex-direction:column;gap:12px}
    .row{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:12px;background:#fff;border:1px solid var(--ring);border-radius:14px;padding:12px 14px;position:relative}
    .row::before{content:"";position:absolute;inset:-1px;border-radius:14px;padding:1px;background:linear-gradient(90deg,rgba(34,199,199,.25),rgba(138,124,246,.25));-webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);-webkit-mask-composite:xor;mask-composite:exclude}
    .time{font-weight:800;color:#16a0a0;font-variant-numeric:tabular-nums}
    .cls{font-weight:700}
    .tch{color:var(--muted);font-size:13px}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{font-size:12px;padding:6px 10px;border-radius:999px;background:#f4f7ff;border:1px solid var(--ring)}

    iframe{width:100%;border:0}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <!-- decorative lotus -->
  <svg class="lotus" aria-hidden="true" viewBox="0 0 64 64"><path d="M32 2c4 10 9 16 17 20-5 5-9 11-10 19-6-3-11-3-17 0-1-8-5-14-10-19 8-4 13-10 17-20z"/></svg>
  <svg class="lotus" aria-hidden="true" viewBox="0 0 64 64"><path d="M32 2c4 10 9 16 17 20-5 5-9 11-10 19-6-3-11-3-17 0-1-8-5-14-10-19 8-4 13-10 17-20z"/></svg>
  <svg class="lotus" aria-hidden="true" viewBox="0 0 64 64"><path d="M32 2c4 10 9 16 17 20-5 5-9 11-10 19-6-3-11-3-17 0-1-8-5-14-10-19 8-4 13-10 17-20z"/></svg>

  <div class="wrap">
    <header>
      <h1 class="logo">YogaSix West New York</h1>
      <nav aria-label="Main">
        <a href="#schedule">Schedule</a>
        <a href="#contact">Contact</a>
        <a href="https://maps.google.com/?q=45+Riverwalk+Place+West+New+York+NJ+07020" target="_blank" rel="noopener">Directions</a>
        <a href="https://members.yogasix.com/offers/yogasix-west-new-york/3-classes-for-just-36?subtotal=false" target="_blank" rel="noopener">Intro Offer</a>
      </nav>
    </header>

    <!-- DAILY (parsed from Worker) -->
    <section id="schedule" class="card" aria-labelledby="h-daily">
      <h2 id="h-daily">Today’s Classes</h2>
      <div class="body">
        <div id="daily-list" class="list" role="list">
          <div class="tch" id="daily-loading">Loading…</div>
        </div>
      </div>
    </section>

    <!-- WEEKLY (official widget only) -->
    <section class="card" aria-labelledby="h-weekly">
      <h2 id="h-weekly">This Week</h2>
      <div class="body">
        <iframe
          src="https://app.clubready.com/admin/api/classpublish.asp?ClassKey=07C3B1440216478A3711C5DFC09E56EDD66B98407764FC0A"
          height="900" title="Weekly Schedule (ClubReady Widget)"></iframe>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="card" aria-labelledby="h-contact">
      <h2 id="h-contact">Contact</h2>
      <div class="body">
        <p>Email: <a href="mailto:westnewyork@yogasix.com">westnewyork@yogasix.com</a></p>
        <p>Phone: (201) 361-5299</p>
      </div>
    </section>
  </div>

  <script>
    // === CONFIG ===
    const DAILY_ENDPOINT = "https://yogasix-schedule.kate-espinal.workers.dev/daily.json";

    // helpers
    const $ = id => document.getElementById(id);
    const title = s => (s||"").toLowerCase().replace(/\b([a-z])/g, m => m.toUpperCase()).replace(/\s+/g," ").trim();

    async function loadDaily(){
      const list = $("daily-list");
      try{
        const r = await fetch(DAILY_ENDPOINT, { cache:"no-store" });
        if(!r.ok) throw new Error("HTTP " + r.status);
        const d = await r.json();
        const items = Array.isArray(d.items) ? d.items : [];
        list.innerHTML = "";

        if(!items.length){
          list.innerHTML = '<div class="tch">No classes found today.</div>';
          return;
        }

        for(const it of items){
          const chips = [];
          if(it.lengthMins) chips.push(`${it.lengthMins} min`);
          if(it.heated) chips.push("Heated");

          const teacher = title(it.teacher || "");
          const teacherLine = teacher ? `<div class="tch">${teacher}</div>` : "";

          const row = document.createElement("div");
          row.className = "row";
          row.setAttribute("role","listitem");
          row.innerHTML = `
            <div class="time" aria-label="Class time">${it.time || "--"}</div>
            <div>
              <div class="cls">${title((it.className||"").replace(/^Y6\s*/i,""))}</div>
              ${teacherLine}
            </div>
            <div class="chips" aria-label="Tags">${chips.map(c=>`<span class="chip">${c}</span>`).join("")}</div>
          `;
          list.appendChild(row);
        }
      }catch(e){
        list.innerHTML = '<div class="tch">Unable to load daily schedule.</div>';
      }
    }

    loadDaily();
    // refresh daily every 10 minutes
    setInterval(loadDaily, 10 * 60 * 1000);
  </script>
</body>
</html>
